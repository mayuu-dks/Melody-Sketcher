<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <title>Audio Test</title>
</head>
<body>
  <button id="btn">音を鳴らす</button>
  <pre id="log" style="white-space:pre-wrap"></pre>
  <script>
    const log = msg => {
      console.log(msg);
      document.getElementById('log').textContent += msg + '\n';
    };
    const ctx = new (window.AudioContext||window.webkitAudioContext)();
    async function startAudio(evt) {
      log(`🤚 イベント: ${evt.type}`);
      await ctx.resume();
      log(`⚙️ state: ${ctx.state}`);
      const osc = ctx.createOscillator();
      osc.connect(ctx.destination);
      osc.start();
      log('▶️ 再生開始');
      setTimeout(()=>{
        osc.stop();
        log('⏹️ 再生停止');
      }, 200);
    }
    ;['pointerdown','touchstart','click'].forEach(ev =>
      document.getElementById('btn').addEventListener(ev, startAudio, { once:true })
    );
  </script>
</body>
</html>
